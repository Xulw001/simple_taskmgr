cmake_minimum_required(VERSION 3.0.0)

get_filename_component(ROOTDIR ".." ABSOLUTE)
set(SRCDIR ${ROOTDIR}/src)
set(COMMON ${SRCDIR}/common)
set(NET ${SRCDIR}/net)
set(PROC ${SRCDIR}/proc)

include_directories(${COMMON} ${NET} ${PROC})

if(CMAKE_HOST_WIN32)
add_definitions(-D_UNICODE -DUNICODE)
add_compile_options(/wd4996)
else()
SET(CMAKE_CXX_FLAGS_DEBUG "-O0 -Wall -g")
SET(CMAKE_CXX_FLAGS_RELEASE "-DNODEBUG -O2 -Wall")
SET(CMAKE_CXX_FLAGS_RELWITHDEBINFO "-Wall -O2 -g -DNDEBUG")
SET(CMAKE_C_FILAGS_DEBUG "O0 -Wall -g")
SET(CMAKE_C_FLAGS_RELEASE "-DNODEBUG -O2 -Wall")
SET(CMAKE_C_FLAGS_RELWITHDEBINFO "-Wall -O2 -g -DNDEBUG")

if(BUILD_TARGET STREQUAL "x86")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -m32")
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -m32")
else()
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -m64")
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -m64")
endif()
endif()

project(proc)
aux_source_directory(${COMMON} SRC)
aux_source_directory(${SRCDIR} SRC)
aux_source_directory(${PROC} SRC)
add_executable(proc ${SRC})

add_subdirectory(net)
